---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2019/9/6 11:44
---
local CBaseLayer = core.require("xlua/lua_UI/UIBaseLayer.txt")
local InterimLayer = class("InterimLayer", CBaseLayer)
--按钮
local BTNS = {

}
--构造函数
function InterimLayer:ctor(super)
    CBaseLayer.ctor(self)
    self._prefab = {
        path = "prefab_uiHome/ui_home/UI_InterimLayer",
    }
    self._fading = false;
    self:onEnter()
end


--进入Ui调用一次
function InterimLayer:onEnter()
    self:createPnl();
    self:registerButtonEvent(BTNS);
    self:Init();
end

--按钮事件
function InterimLayer:onButtonClick(itype)

end

--退出按钮事件
function InterimLayer:onBackClick()
    CBaseLayer.onExit(self);
end

--初始化
function InterimLayer:Init()
    self.imgBg = self.layer:GetComponent("Image");
end

--显示UI
function InterimLayer:show()
    self:showLayer();
end

local showColor = CS.UnityEngine.Color(0,0,0,1);
local hideColor = CS.UnityEngine.Color(0,0,0,0);
function InterimLayer:ShowUI(timer,callback)
    set_com_enabled(self.imgBg,true);
    self:showLayer();
    --[[self._aniPanelFadeInEndCallback = function()
        self:playAni("InterimLayerAni_2")
        callback();
    end
    self:playAni("InterimLayerAni")]]--
   self.imgBg.color = hideColor;
    self.imgBg.raycastTarget = true;
    local dt = self.imgBg:DOColor(showColor,timer):SetEase(CS.DG.Tweening.Ease.Linear);
    dt:OnComplete(function ()
        self:HideUI(timer,callback)
        if(callback ~= nil)then
            callback();
        end
    end)
end

function InterimLayer:HideUI(timer)
    local dt = self.imgBg:DOColor(hideColor,timer):SetDelay(0.2):SetEase(CS.DG.Tweening.Ease.Linear);
    dt:OnComplete(function ()
        self.imgBg.raycastTarget = false;
        set_com_enabled(self.imgBg,false);
    end)
end

return InterimLayer;
