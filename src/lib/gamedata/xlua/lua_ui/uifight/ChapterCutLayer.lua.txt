---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2019/9/6 11:44
---
local CBaseLayer = core.require("xlua/lua_UI/UIBaseLayer.txt")
local ChapterCutLayer = class("ChapterCutLayer", CBaseLayer)
--按钮
local BTNS = {

}
--构造函数
function ChapterCutLayer:ctor(super)
    CBaseLayer.ctor(self)
    self._prefab = {
        path = "prefab_uiHome/ui_fight/UI_ChapterCutLayer",
    }
    self._fading = false;
    self._uitype = 2;
    self:onEnter()
end


--进入Ui调用一次
function ChapterCutLayer:onEnter()
    self:createPnl();
    self:registerButtonEvent(BTNS);
    self._KeyFrameCall = function ()
        self:onBackClick()
    end
    self:Init();
end

--按钮事件
function ChapterCutLayer:onButtonClick(itype)

end

--退出按钮事件
function ChapterCutLayer:onBackClick()
    if(self.callback)then
        self:callback();
    end
    Groble_SceneMgr:PrefsSetString("isNewOpenChapter"..tostring(self.chapter.id)..Player:GetId(),"1")
    self:onPopLayer();
end

--初始化
function ChapterCutLayer:Init()
    self.txtChapterTitle = self.layer.transform:Find("content/txt_chapter_title"):GetComponent("Text")
    self.txtChapterNum = self.layer.transform:Find("content/txt_chapter_title/txt_chapter_num"):GetComponent("Text")
    self.txtChapterName = self.layer.transform:Find("content/txt_chapter_name"):GetComponent("Text")
end

--显示UI
function ChapterCutLayer:show(chapter,index,callback)
    self.chapter = chapter;
    self:showLayer();
    self.callback = callback;
    self:InitUI(index);
    self:playAni("ChapterCutLayerAnim")
end

--初始化
function ChapterCutLayer:InitUI(index)
    if(index == 0)then
        self.txtChapterTitle.text = "";
        self.txtChapterNum:SetTextById(76000060);
    else
        self.txtChapterNum.text = index;
    end
    self.txtChapterName.text = self.chapter.name;
end

return ChapterCutLayer;
